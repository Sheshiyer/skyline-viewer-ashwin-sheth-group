<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Panoramic Logo Loader</title>
    <meta http-equiv="Cache-Control" content="no-cache" />
    <style>
      html, body { height: 100%; margin: 0; background: #0b1220; color: #e5e7eb; }
      .wrap { min-height: 100%; display: grid; place-items: center; }
      .logo { max-width: 90vw; width: clamp(128px, 20vw, 360px); height: auto; display: block; }
      .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0; }
      .fallback { font: 500 14px/1.4 system-ui, -apple-system, Segoe UI, Roboto; padding: 8px 12px; background: #1f2937; border-radius: 8px; }
    </style>
    <link rel="preconnect" id="preconnect" crossorigin />
  </head>
  <body>
    <div class="wrap">
      <img id="logo" class="logo" alt="Panoramic viewer logo" loading="lazy" decoding="async" fetchpriority="low" />
      <div id="fallback" class="fallback" hidden>Logo failed to load. Please retry or check your network.</div>
      <p class="sr-only">Only the panoramic logo image is loaded for performance.</p>
    </div>

    <script>
      (function() {
        // Read ?logo=<Vercel CDN URL>
        const params = new URLSearchParams(location.search);
        const src = params.get('logo');
        const logo = document.getElementById('logo');
        const fallback = document.getElementById('fallback');
        const preconnect = document.getElementById('preconnect');

        if (!src) {
          console.error('No logo URL provided. Use ?logo=https://<vercel-cdn>/path.svg');
          fallback.hidden = false;
          return;
        }

        try {
          const u = new URL(src);
          preconnect.href = u.origin;
        } catch (e) {
          console.warn('Invalid logo URL provided:', src);
        }

        // Set responsive attributes
        logo.src = src;
        logo.setAttribute('crossorigin', 'anonymous');
        logo.onerror = function() {
          console.error('Logo failed to load from Vercel CDN:', src);
          fallback.hidden = false;
        };
        logo.onload = function() {
          // Optionally, measure performance
          try {
            const t = performance.getEntriesByName(src)[0];
            if (t) console.log('Logo TTFB(ms):', Math.round((t.responseStart - t.startTime))); 
          } catch {}
        };
      })();
    </script>
  </body>
</html>